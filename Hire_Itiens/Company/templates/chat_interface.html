
<!--A Design by W3layouts
   Author: W3layout
   Author URL: http://w3layouts.com
   License: Creative Commons Attribution 3.0 Unported
   License URL: http://creativecommons.org/licenses/by/3.0/

   -->

   
   {% extends 'layout.html' %}
   {% load static %}
   {% block content %}
   {% if messages %}
        {% for message in messages %}
           <script>
            alert('{{message}}')
           </script>
        {% endfor %}
{% endif %}
<style>
   .uline{
      text-decoration: underline;
   }
   .container{
      margin-top: 50px;
   }
   .sm-h5{
      font-size: 15px;
   }
   .sm-p{
      max-width: 310px;
      word-wrap: break-word;
      line-height: 1.2
   }
   .ser-sevice-inner:hover{
      background-color:#021343;
   }
   .title{
      color: #113dde;
  font-weight: bold;
   }
   img{
      border-radius:50px;
   } 
</style>
      <!-- //page details -->
      <!--service-one -->
    
      <section class="service-one py-lg-4 py-md-3 py-sm-3 py-3" id="service-one">
         <div class="container py-lg-5 py-md-5 py-sm-4 py-3">
            <!-- <form method="GET" action="">
               <input type="text" name="search_query" placeholder="Search...">
               <button type="submit">Search</button>
               <a href="/users/0"><button><i class="fas fa-sync-alt"></button></i></a>
            </form> -->
            <h3 class="title text-center mb-md-4 mb-sm-3 mb-3 mb-2 ">View Chats</h3>
            <div class="row mt-md-4 mt-3">
               
                   
                    
        <div class="col-lg-8 col-sm-6 mx-auto">
            <div class="contact-middle" style="max-height: 400px; overflow-y: auto;">
             
                

                <!-- contact -->
                <div class="container mt-3">
                    <div class="row">
                      <div class="col-md-12 mx-auto">
                        <div class="card feedback-card">
                          <div class="card-body">
                            {% for i in data %}
                            <h5 class="card-title mt-5 text-primary">  {% if i.sender.id == request.user.id %}Me:{% else %}{{ i.sender.username}}:{% endif %}</h5>
                            <p>{{i.message}}</p>
                            {% endfor %}

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
              
            </div>
            <form action="" method="post" class="mt-3">
                {% csrf_token %}
                <div class="form-group">
                  {{form.message}}
                </div>
                <button type="submit" class="btn btn-primary">Send</button>
              </form>
              
        </div>
           

            </div>
         </div>
      </section>
      <!--// service-one -->
      <!-- service -->
    
      <!--// service -->
      <!-- price -->
      <script>
         // Select all elements with class 'paragraph'
         const paragraphs = document.querySelectorAll('.sm-p');
     
         // Loop through each paragraph
         paragraphs.forEach(paragraph => {
             const computedStyle = window.getComputedStyle(paragraph);
             const lineHeight = parseInt(computedStyle.getPropertyValue('line-height'));
             const paragraphHeight = paragraph.clientHeight;
             const numberOfLines = Math.round(paragraphHeight / lineHeight);
     
             // If the number of lines exceeds 2, hide the paragraph content
             if (numberOfLines > 1) {
                 paragraph.classList.add('collapsed'); // Add a class to indicate the paragraph is collapsed
                 paragraph.style.maxHeight = lineHeight * 1 + 'px'; // Limit height to 2 lines
                 paragraph.style.overflow = "hidden";
                 paragraph.title = "Click here To View More"; // Hide overflow
             }
     
             // Add click event listener to toggle visibility
             paragraph.addEventListener('click', function() {
                 if (this.classList.contains('collapsed')) {
                     this.style.maxHeight = 'none'; // Show full content
                     this.classList.remove('collapsed'); // Remove collapsed class
                 } else {
                     this.style.maxHeight = lineHeight * 1 + 'px'; // Limit height to 2 lines
                     this.classList.add('collapsed'); // Add collapsed class
                 }
             });
         });
     </script>
     
    
{% endblock %}